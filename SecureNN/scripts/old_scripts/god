
#!/bin/bash

USERNAME1=ubuntu
USERNAME2=ubuntu
USERNAME3=ubuntu
USERNAME4=ubuntu
USERNAME5=ubuntu


#LAN->1,2,3
# IP1=18.219.154.85		# Ohio
# IP2=18.222.108.126		# Ohio
# IP3=18.191.254.242		# Ohio

#WAN_3PC->6,1,7
IP1=13.57.10.22
IP4=13.58.64.219
IP5=18.188.79.8



#WAN_3PC
# ssh -i ~/.ssh/msr_cnn_west.pem $USERNAME6@$IP6 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make; echo compile done; ./run; less output/time0.txt" &
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME1@$IP1 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make; echo compile done; ./run" & 
# ssh -i ~/.ssh/msr_cnn_ca.pem $USERNAME7@$IP7 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make; echo compile done; ./run" & 


#BUILD AND RUN
#LAN
# ssh -i ~/.ssh/ndss_ohio.pem $USERNAME1@$IP1 "pkill BMRPassive.out; echo clean completed; cd SecureNN; chmod +x run; git pull; make; echo compile done; ./run; less output/time0.txt" & 
# ssh -i ~/.ssh/ndss_ohio.pem $USERNAME2@$IP2 "pkill BMRPassive.out; echo clean completed; cd SecureNN; chmod +x run; git pull; make; echo compile done; ./run" & 
# ssh -i ~/.ssh/ndss_ohio.pem $USERNAME3@$IP3 "pkill BMRPassive.out; echo clean completed; cd SecureNN; chmod +x run; git pull; make; echo compile done; ./run" & 

#WAN
ssh -i ~/.ssh/ndss_west.pem $USERNAME1@$IP1 "pkill BMRPassive.out; echo clean completed; cd SecureNN; chmod +x run; git pull; make; echo compile done; ./run; less output/time0.txt" & 
ssh -i ~/.ssh/ndss_ohio.pem $USERNAME4@$IP4 "pkill BMRPassive.out; echo clean completed; cd SecureNN; chmod +x run; git pull; make; echo compile done; ./run" & 
ssh -i ~/.ssh/ndss_ohio.pem $USERNAME5@$IP5 "pkill BMRPassive.out; echo clean completed; cd SecureNN; chmod +x run; git pull; make; echo compile done; ./run" &


#CLEAN, BUILD AND RUN
#LAN
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME1@$IP1 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make clean; make; echo compile done; ./run; less output/time0.txt" & 
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME2@$IP2 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make clean; make; echo compile done; ./run" & 
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME3@$IP3 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make clean; make; echo compile done; ./run" & 
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME4@$IP4 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make clean; make; echo compile done; ./run" &
#WAN
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME1@$IP1 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make clean; make; echo compile done; ./run; less output/time0.txt" & 
# ssh -i ~/.ssh/msr_cnn_va.pem $USERNAME5@$IP5 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make clean; make; echo compile done; ./run" & 
# ssh -i ~/.ssh/msr_cnn_west.pem $USERNAME6@$IP6 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make clean; make; echo compile done; ./run" &
# ssh -i ~/.ssh/msr_cnn_ca.pem $USERNAME7@$IP7 "pkill BMRPassive.out; echo clean completed; cd SecureDNN; chmod +x run; git pull; make clean; make; echo compile done; ./run" & 




########################################## OTHERS ##########################################
#GENERIC COMMANDS
#git clone https://www.github.com/snwagh/SecureNN.git
#cd SecureNN; mkdir output; git config --global credential.helper store; git pull
#sudo apt-get update; sudo apt-get install g++; sudo apt-get install libssl-dev; sudo apt-get install make
#sudo apt-get install iperf3
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME1@$IP1 "cd SecureDNN; git pull; cp azure_exec run"
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME2@$IP2 "cd SecureDNN; git pull; cp azure_exec run"
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME3@$IP3 "cd SecureDNN; git pull; cp azure_exec run"
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME4@$IP4 "cd SecureDNN; git pull; cp azure_exec run"
# ssh -i ~/.ssh/msr_cnn_va.pem $USERNAME5@$IP5 "cd SecureDNN; git pull; cp azure_exec run"
# ssh -i ~/.ssh/msr_cnn_west.pem $USERNAME6@$IP6 "cd SecureDNN; git pull; cp azure_exec run"
# ssh -i ~/.ssh/msr_cnn_ca.pem $USERNAME7@$IP7 "cd SecureDNN; git pull; cp azure_exec run"

# ssh -i ~/.ssh/msr_cnn.pem $USERNAME1@$IP1 
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME2@$IP2 
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME3@$IP3 
# ssh -i ~/.ssh/msr_cnn.pem $USERNAME4@$IP4 
# ssh -i ~/.ssh/msr_cnn_va.pem $USERNAME5@$IP5 
# ssh -i ~/.ssh/msr_cnn_west.pem $USERNAME6@$IP6 
# ssh -i ~/.ssh/msr_cnn_ca.pem $USERNAME7@$IP7 



#ONLY BUILD
# ssh $USERNAME1@$IP1 "cd SecureDNN; git pull; bash build; echo compile done;" & 
# ssh $USERNAME2@$IP2 "cd SecureDNN; git pull; bash build; echo compile done;" & 
# ssh $USERNAME3@$IP3 "cd SecureDNN; git pull; bash build; echo compile done;" & 
# ssh $USERNAME4@$IP4 "cd SecureDNN; git pull; bash build; echo compile done;" &

#ONLY RUN
# ssh $USERNAME1@$IP1 "cd SecureDNN; ./run" & 
# ssh $USERNAME2@$IP2 "cd SecureDNN; ./run" & 
# ssh $USERNAME3@$IP3 "cd SecureDNN; ./run" & 
# ssh $USERNAME4@$IP4 "cd SecureDNN; ./run" &

#BAD RUN, KILL PROCESSES
# ssh $USERNAME1@$IP1 "pkill BMRPassive.out; echo clean completed; cd SecureNN; mkdir output" & 
# ssh $USERNAME2@$IP2 "pkill BMRPassive.out; echo clean completed; cd SecureNN; mkdir output" & 
# ssh $USERNAME3@$IP3 "pkill BMRPassive.out; echo clean completed; cd SecureNN; mkdir output" & 
# ssh $USERNAME4@$IP4 "pkill BMRPassive.out; echo clean completed; cd SecureNN; mkdir output" &
# ssh $USERNAME5@$IP5 "pkill BMRPassive.out; echo clean completed; cd SecureNN; mkdir output" &


#BUILD AND RUN
# ssh $USERNAME1@$IP1 "cd SecureDNN; git pull; bash build; echo compile done; ./run; less output/time0.txt" & 
# ssh $USERNAME2@$IP2 "cd SecureDNN; git pull; bash build; echo compile done; ./run" & 
# ssh $USERNAME3@$IP3 "cd SecureDNN; git pull; bash build; echo compile done; ./run" & 
# ssh $USERNAME4@$IP4 "cd SecureDNN; git pull; bash build; echo compile done; ./run" &


#FORCE PULL GIT
# ssh $USERNAME1@$IP1 "cd SecureDNN; git fetch --all; git reset --hard origin/master; echo Force pull completed" & 
# ssh $USERNAME2@$IP2 "cd SecureDNN; git fetch --all; git reset --hard origin/master; echo Force pull completed" & 
# ssh $USERNAME3@$IP3 "cd SecureDNN; git fetch --all; git reset --hard origin/master; echo Force pull completed" & 
# ssh $USERNAME4@$IP4 "cd SecureDNN; git fetch --all; git reset --hard origin/master; echo Force pull completed" &


echo "Finished"


